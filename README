ncs is the nodecast server


INSTALL

first, install deb :
apt-get install g++ make scons libzmq-dev libboost-all-dev libqt4-dev libavahi-compat-libdnssd-dev


next, get submodule libraries :
git submodule update --init

If you prefer to use your system's libraries, you should modify the ncs.pro


second, make the mongodb client :
cd externals/mongodb
scons mongoclient
sudo cp libmongoclient.a /usr/local/lib

third, make the qxmpp client :
cd externals/qxmpp
qmake
make
make install

four, make the libqxt library 
cd externals/libqxt
./configure
make
make install

last, make the nodecast server :
qmake
make


Launch NCS
ncs --mongodb-ip=127.0.0.1 --mongodb-base=nodecast_prod --domain-name=localhost --xmpp-client-port=6222 --xmpp-server-port=6269 --smtp-hostname="your.server.mail" --smtp-username="your-user-account" --smtp-password="your-password" --smtp-sender="your-email-sender" --smtp-recipient="your-email-recipient"


Launch a worker
./ncw --ncs-ip=127.0.0.1 --ncs-port=5569 --node-uuid=your-node-uuid --node-password=your-node-password --worker-type=process --worker-name="ls" --exec="ls"


MONGODB
create user collection
doc = { login : 'user', email : 'user@email.com', authentication_token : 'token'}
db.users.insert(doc);


API USE
1. create a node
curl -H "X-nodename: your-node-name" --user "email:token" http://127.0.0.1:4567/node/create
return node auth : {"node_password":"e6cc13a3-1236-46cb-b40f-a66650ab5eef","node_uuid":"2d0a7780-e8fe-4e0a-89c6-a5a2737b095a"} 

2. create a workflow
curl -H "X-workflow: test" -d '{ "worker1": 1: "worker2": 2 }" --user "user@email.com:token" http://127.0.0.1:4567/workflow/create
return a workflow : {"uuid":"0ebcdab6-0263-42d3-be7d-9602fa15f68c"}

3. push data
curl -H "X-node-uuid: 2d0a7780-e8fe-4e0a-89c6-a5a2737b095a" -H "X-node-password: 2d0a7780-e8fe-4e0a-89c6-a5a2737b095a" -H "X-workflow-uuid: 0ebcdab6-0263-42d3-be7d-9602fa15f68c" -H "X-payloadfilename: filename" -X POST --data-binary @filename http://127.0.0.1:4567/payload/create
return a session uuid : {"uuid":"7b32b9d0-3ea9-4663-9577-4b34192055bf"}


contact : fredix at nodecast dot net
